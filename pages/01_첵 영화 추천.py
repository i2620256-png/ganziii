import streamlit as st

# MBTI 추천 스트림릿 앱
# 별도 라이브러리 없이 streamlit만 사용

st.set_page_config(page_title="MBTI 책·영화 추천", page_icon="🎒", layout="centered")

st.title("MBTI로 골라보는 책·영화 추천 🎒📚🎬")
st.write("안녕! MBTI 하나 골라서 너한테 딱 맞는 책 2권, 영화 2편을 추천해줄게. 고등학생 취향의 이모지랑 친근한 말투로 준비했어. 😎")

MBTI_LIST = [
    "INTJ", "INTP", "ENTJ", "ENTP",
    "INFJ", "INFP", "ENFJ", "ENFP",
    "ISTJ", "ISFJ", "ESTJ", "ESFJ",
    "ISTP", "ISFP", "ESTP", "ESFP",
]

RECOMMENDATIONS = {
    "INTJ": {
        "books": [
            ("사피엔스 - 유발 하라리", "넓은 관점에서 역사와 인간을 분석하는 책. 논리적이고 미래지향적인 INTJ에게 생각거리를 많이 줘요."),
            ("아웃라이어 - 말콤 글래드웰", "성공의 패턴을 분석하는 책. 구조와 원인을 좋아하는 너한테 잘 맞을 거야.")
        ],
        "movies": [
            ("인터스텔라 (Interstellar)", "거대한 스케일과 과학적 상상력이 매력적. 복잡한 플롯을 즐길 수 있어."),
            ("매트릭스 (The Matrix)", "시스템을 분석하고 진실을 찾는 주제라 INTJ 스타일에 딱 좋아.")
        ]
    },
    "INTP": {
        "books": [
            ("이기적 유전자 - 리처드 도킨스", "아이디어 중심의 과학 책. 호기심 많은 INTP가 좋아할 내용이 많아."),
            ("생각의 탄생 - 제임스 웨버", "창의적 사고와 영감에 관한 책이라 아이디어 뱅크인 너에게 추천.")
        ],
        "movies": [
            ("셜록 홈즈 (Sherlock Holmes)", "추리와 논리 전개가 재밌어. 세세한 단서 찾는 재미가 있어."),
            ("블레이드 러너 2049 (Blade Runner 2049)", "철학적이고 관조적인 SF. 생각할 거리가 많아.")
        ]
    },
    "ENTJ": {
        "books": [
            ("원씽(The One Thing) - 게리 켈러", "목표 중심적이고 효율적인 전략을 좋아하는 ENTJ에게 실용적 팁을 줘."),
            ("리더의 조건 - 존 코터", "리더십과 조직운영에 관한 책. 실행력을 중시하는 너에게 딱.")
        ],
        "movies": [
            ("머니볼 (Moneyball)", "전략과 데이터로 승부하는 이야기. 계획 세우는 걸 좋아하면 빠져들걸."),
            ("월 스트리트 (Wall Street)", "야망과 전략, 결단을 주제로 한 영화야.")
        ]
    },
    "ENTP": {
        "books": [
            ("스파크: 창의성의 기원 - 핀치", "아이디어와 발상이 주제인 책. 변덕스럽게 아이디어를 굴리는 ENTP에게 좋아."),
            ("타고난 설득가 - 로버트 치알디니", "설득과 커뮤니케이션 기술에 관한 책이라 토론 잘하는 너에게 도움돼.")
        ],
        "movies": [
            ("인셉션 (Inception)", "아이디어 놀이와 반전이 많은 영화. 머리 굴리는 걸 좋아하면 최고."),
            ("빅 쇼트 (The Big Short)", "기발한 관점과 빠른 말투가 매력인 작품.")
        ]
    },
    "INFJ": {
        "books": [
            ("연금술사 - 파울로 코엘료", "자아 탐구와 의미 찾기를 좋아하는 INFJ에게 울림을 줘."),
            ("작은 것들의 신 - 아룬다티 로이", "감수성이 깊은 너에게 맞는 문학적 경험을 줄 거야.")
        ],
        "movies": [
            ("이터널 선샤인 (Eternal Sunshine of the Spotless Mind)", "감정의 섬세함과 관계의 의미를 탐구하는 영화."),
            ("굿 윌 헌팅 (Good Will Hunting)", "내면의 상처와 성장 이야기라 공감하기 쉬울 거야.")
        ]
    },
    "INFP": {
        "books": [
            ("호밀밭의 파수꾼 - J.D. 샐린저", "자아와 반항, 감수성이 담긴 작품. 감정 이입이 쉬워."),
            ("달과 6펜스 - 서머싯 몸", "인생의 선택과 예술적 갈망을 다룬 소설이라 예민한 INFP에게 추천.")
        ],
        "movies": [
            ("비포 선라이즈 (Before Sunrise)", "감정과 대화 중심의 로맨스. 잔잔하게 마음을 울려."),
            ("이터널 선샤인 (Eternal Sunshine of the Spotless Mind)", "기억과 사랑의 감정선을 섬세하게 그린 작품.")
        ]
    },
    "ENFJ": {
        "books": [
            ("사람을 얻는 기술 - 데일 카네기", "대인관계와 영향력에 관심 많은 ENFJ에게 실용적 팁을 줘."),
            ("리더의 말하기 - 커뮤니케이션 가이드", "사람을 이끄는 법과 공감 능력을 키우는 데 도움이 돼.")
        ],
        "movies": [
            ("리틀 미스 선샤인 (Little Miss Sunshine)", "가족과 사람 사이의 따뜻함을 그린 영화. 감정선이 좋아."),
            ("스티브 잡스 (Steve Jobs)", "사람을 끌어모으는 카리스마와 지도력의 면모가 인상적이야.")
        ]
    },
    "ENFP": {
        "books": [
            ("모비딕 - 허먼 멜빌", "모험과 은유가 많은 작품으로 상상력이 풍부한 ENFP에게 좋아."),
            ("넛지 - 리처드 탈러", "사람 마음과 선택을 다루는 눈높이 있는 책. 호기심 많은 너에게 추천.")
        ],
        "movies": [
            ("어바웃 타임 (About Time)", "사랑과 삶을 따뜻하게 그린 영화. 감수성 충만한 ENFP에겐 힐링."),
            ("월터의 상상은 현실이 된다 (The Secret Life of Walter Mitty)", "모험과 상상이 어우러진 영화라 영감을 줄 거야.")
        ]
    },
    "ISTJ": {
        "books": [
            ("규칙 없음 - 빌 버넷, 데이브 에반스", "체계적 문제 해결과 규칙을 좋아하는 ISTJ에게 유용한 지침서."),
            ("총, 균, 쇠 - 재레드 다이아몬드", "역사적 원인과 구조를 좋아하면 빠져들 책이야.")
        ],
        "movies": [
            ("캐스트 어웨이 (Cast Away)", "실용적이고 현실적인 생존기. 책임감 강한 너에게 공감될 거야."),
            ("타이타닉 (Titanic)", "드라마틱한 사건과 인물 관계를 체계적으로 따라가기 좋아.")
        ]
    },
    "ISFJ": {
        "books": [
            ("빨간 머리 앤 - 루시 모드 몽고메리", "따뜻하고 세심한 인간관계를 즐기는 ISFJ에게 추천하는 클래식."),
            ("나미야 잡화점의 기적 - 히가시노 게이고", "사람들의 이야기에 공감하는 너한테 딱 맞는 따뜻한 소설.")
        ],
        "movies": [
            ("월터의 상상은 현실이 된다 (The Secret Life of Walter Mitty)", "소소한 감동과 성장 스토리가 좋아."),
            ("미 비포 유 (Me Before You)", "감정 이입이 쉬운 따뜻한 드라마.")
        ]
    },
    "ESTJ": {
        "books": [
            ("원칙(Principles) - 레이 달리오", "결정과 시스템을 중시하는 ESTJ에게 전략적 사고를 선사해."),
            ("성공하는 사람들의 7가지 습관 - 스티븐 코비", "실천 지향적이고 규율 있는 삶을 돕는 책.")
        ],
        "movies": [
            ("글래디에이터 (Gladiator)", "리더십과 책임, 행동 중심의 드라마를 좋아하면 추천."),
            ("에너미 오브 스테이트 (Enemy of the State)", "계획과 실행, 스릴을 즐기는 타입에게 잘 맞아.")
        ]
    },
    "ESFJ": {
        "books": [
            ("작은 아씨들 - 루이자 메이 올콧", "사람과 관계를 소중히 여기는 ESFJ에게 따뜻한 이야기."),
            ("사랑의 기술 - 에리히 프롬", "사랑과 관계에 대한 통찰이 풍부해서 공감이 쉬워.")
        ],
        "movies": [
            ("프라이드 앤 프리저디스 (Pride & Prejudice)", "관계와 감정선이 중심인 작품. 감성적인 즐거움이 있어."),
            ("리틀 미스 선샤인 (Little Miss Sunshine)", "가족과 사람 사이의 따뜻한 유대감을 다뤄.")
        ]
    },
    "ISTP": {
        "books": [
            ("도구 있는 삶 - 말콤 글래드웰(에세이 모음)", "실용적이고 손으로 해보는 걸 좋아하는 ISTP에게 영감이 됨."),
            ("총, 균, 쇠 - 재레드 다이아몬드", "현실적 원인 분석과 사실 위주 설명을 선호하면 좋아.")
        ],
        "movies": [
            ("존 윅 (John Wick)", "액션과 기술적 묘사가 매력적. 속도감 있는 전개 좋아할 듯."),
            ("매드 맥스: 분노의 도로 (Mad Max: Fury Road)", "직관적이고 즉각적인 액션을 즐기는 타입에게 추천.")
        ]
    },
    "ISFP": {
        "books": [
            ("노르웨이의 숲 - 무라카미 하루키", "감성적이고 예술적 세계를 좋아하는 ISFP에게 잘 맞아."),
            ("연금을 수리하는 사람들 - 단편 모음", "잔잔한 감정선과 미니멀한 미학을 즐길 수 있어.")
        ],
        "movies": [
            ("라라랜드 (La La Land)", "음악과 감성이 어우러진 영화. 예술적 감각을 자극해."),
            ("아멜리에 (Amélie)", "작고 섬세한 행복을 그리는 이야기라 마음에 들어할 거야.")
        ]
    },
    "ESTP": {
        "books": [
            ("아웃라이어 - 말콤 글래드웰", "빠른 전개와 현실적인 사례가 많아 행동파인 ESTP에게 딱."),
            ("나는 왜 너를 사랑하는가 - 알랭 드 보통", "관계의 심리를 흥미롭게 다루는 책.")
        ],
        "movies": [
            ("스카페이스 (Scarface)", "강렬하고 에너제틱한 이야기. 즉흥적이고 모험적인 너에게 추천."),
            ("탑 건 (Top Gun)", "액션과 스릴, 경쟁을 즐기는 타입에게 딱 좋아.")
        ]
    },
    "ESFP": {
        "books": [
            ("먹고 기도하고 사랑하라 - 엘리자베스 길버트", "경험 중심의 삶을 사랑하는 ESFP에게 영감을 줘."),
            ("그리스인 조르바 - 니코스 카잔차키스", "삶을 뜨겁게 즐기는 태도가 잘 드러나는 작품.")
        ],
        "movies": [
            ("포레스트 검프 (Forrest Gump)", "감성적이면서도 삶의 여정을 따뜻하게 그려줘."),
            ("맨 인 블랙 (Men in Black)", "유머와 액션을 함께 즐길 수 있어.")
        ]
    }
}

st.markdown("---")

col1, col2 = st.columns([1, 2])
with col1:
    mbti = st.selectbox("너의 MBTI를 골라줘 ✨", MBTI_LIST)
    show = st.button("추천 보여줘! 🎯")

with col2:
    st.write("선택한 유형:", f"**{mbti}**")

if show:
    rec = RECOMMENDATIONS.get(mbti)
    if rec:
        st.header("책 추천 📚")
        for title, desc in rec["books"]:
            st.subheader(f"{title} ✨")
            st.write(desc)
        st.markdown("---")
        st.header("영화 추천 🎬")
        for title, desc in rec["movies"]:
            st.subheader(f"{title} 🎥")
            st.write(desc)
        st.markdown("---")
        st.info("마음에 드는 추천이 있으면 친구한테도 공유해봐! 그리고 혹시 나중에 추천 스타일 바꾸고 싶으면 알려줘~ 😄")
    else:
        st.error("아직 준비되지 않은 MBTI예요. 다른 걸 골라줘~")

st.caption("이 앱은 외부 라이브러리 없이 Streamlit만으로 만들어졌어요. Streamlit Cloud에 업로드하면 바로 쓸 수 있습니다.")
